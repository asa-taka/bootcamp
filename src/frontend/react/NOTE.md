:::tip


実際のところReactコンポーネントが返しているのはDOMではなくVirtual DOMというものである。


このVirtual DOMと実際のDOMの差分を検知しその差分をなくすようにDOMを操作することをReconcilationと呼ぶ。
Reactが実現しているリアクティブな動作の肝である。

:::

## はい、ここで今回の題材の説明をします

### CRUD(+Q)操作

CRUDはReactに限らずウェブアプリ、もしくはバックエンドを含めたシステムに関する言葉。

- それぞれCREATE/READ/UPDATE/DELETE + Queryの略
  - +Qはそこまでメジャーではない言い方ではないけれど、今回はこの言い方を採用する
- 閲覧系: QUERY, READ
- 変更系: CREATE, UPDATE, DELETE

なぜこの言葉を説明するのか。大事だから。
QUERYとREADで満足しがち。そしてアプリの画面に占める面積的にはこの二つの機能がほぼ全てを占めるため、この二つが実装できればアプリはほとんど完成、と思ってしまいがち(私はそうだった)。
でもアプリ開発の難しさは残りの変更系の操作に
主管的で雑な言い方をするとアプリ全体に占める操作をこの二つに分類すると、変更系の実装は閲覧系の3-5倍くらい大変。単純に操作の種類が多いのもある。
代表的なものを挙げるとCREATEとUPDATEはそれぞれ作成フォームと更新フォーム、DELETEは削除ボタン(+確認ダイアログ)として実装される。
CREATEとUPDATEはフォームをどこに置くか、ダイアログにするか、別ページにするかで悩む。
そしてCREATEとUPDATEのフォームは似ている。似ているためコードの重複を考えると共通部分を切り分けたくなる。しかし単純に切り分けられるだろうか。

DELETEは確認ダイアログをどう出すかで悩む。DELETEボタンは小さいくせに機能が沢山詰まっている。

CRUD操作は意識しながらアプリ開発をするとそれぞれの操作に必要な実装がパターンとして見えてくる。

### TODOアプリ

TODOアプリはCRUD+Q操作を学ぶための題材として適している。

- READ: TODO表示
- QUERY: TODOフィルタリング
- CREATE: TODO作成
- UPDATE: TODO更新
- DELETE: TODO削除

そもそもアプリ開発の経験を積むためには題材が必要だけれど、その題材を決めるのも初めは難しい。
という理由で初心者にもとりあえずおすすめ。

中級者以上であっても、TODOアプリを作ればとりあえずそのフレームワークの癖や、
実践的なアプリを組む際のイメージがなんとなく掴めるため、新しいフレームワークを評価する際にも使える(と言いつつ私は使ったことはない)。

TODOアプリで手に慣らしたテクニックを応用すると複雑なアプリの組み方も少しずつ見えてくる。
次で少し(妄想の)アプリを考えてみる。

### TODOの先

例えばブログサービスを考えてみる。各ブログエントリにはコメントを書けることにする。

記事(document)とコメント(comment)の二種類のエンティティ(システム上で取り扱う「モノ」「対象物」としてのデータをこう呼ぶことがある)があるとしよう。
このブログサービス上での操作は例えばこんな感じになるかもしれない:

- 記事(document)に関する操作
  - ブログ閲覧: READ document + QUERY comment (普通のAPIならまとめて取得できると思う)
  - ブログ投稿: CREATE document
  - ブログ編集: UPDATE document
  - ブログ削除: DELETE document
- コメント(comment)に関する操作
  - コメントをブログに投稿: CREATE comment
  - コメントを編集: UPDATE comment
  - コメントを削除: DELETE comment

とても適当な例なのでなんとなくで捉えて欲しい。一般的なブログサービスを想像すればなんとなくイメージはつくと思う。
そして概ねCRUDのそれぞれの操作で必要なUIパーツ(フォームやボタン)にパターンが見出せるのも理解できると思う。
CREATEとUPDATEにはフォームが、DELETEにはボタンが使われそうだなという、そういうパターンがある。

パターンが同じなら概ね同じような実装方法が取れる。

### 今回の講義のゴール

というわけで今回の講義を通してのゴールは

- TODOアプリをCRUDを意識しながらReactで実装し、それぞれの実装パターンを身につける

以上、やっていこう。
